{{> header_dashboard}}
<main class="mx-auto max-w-[1600px] px-5 md:px-10 my-10">
<section class="rounded-2xl border bg-neutral-50 p-5 md:p-6">
    <h2 class="text-xl font-semibold mb-4">Notifications Configuration</h2>
    <p class="text-neutral-600 mb-6">
        Configure how you wish to receive important notifications about your instances. You can enable Email and/or Telegram notifications, and define the maximum notification frequency.
    </p>

    <form method="post" action="{{forms.notifications.submitLink}}" id="notificationsForm" class="grid gap-8 md:grid-cols-2">
        <!-- Email Notifications -->
        <div class="space-y-4">
            <h3 class="text-lg font-semibold flex items-center gap-2">
                Email Notifications
            </h3>

            <label class="flex items-center gap-3">
                <input type="checkbox" name="email_enabled" {{#if notifications.email.enabled}}checked{{/if}} class="w-4 h-4 accent-black cursor-pointer">
                <span class="text-sm font-medium">Enable Email notifications</span>
            </label>

            <div class="grid gap-2">
                <label for="email_address" class="text-sm font-medium">Notification email address</label>
                <input type="email" id="email_address" name="email_address" value="{{notifications.email.address}}" placeholder="you@example.com" class="w-full rounded-lg border px-3 py-2 outline-none focus:ring-2 focus:ring-black/30">
            </div>

            <div class="grid gap-2">
                <label for="email_frequency" class="text-sm font-medium">Maximum frequency (minutes)</label>
                <input type="number" id="email_frequency" name="email_frequency" min="1" step="1" value="{{notifications.email.frequency}}" placeholder="10" class="w-full rounded-lg border px-3 py-2 outline-none focus:ring-2 focus:ring-black/30">
                <p class="text-xs text-neutral-500">Minimum 1 minute between notifications.</p>
            </div>
        </div>

        <!-- Telegram Notifications -->
        <div class="space-y-4">
            <h3 class="text-lg font-semibold flex items-center gap-2">
                Telegram Notifications
            </h3>

            <label class="flex items-center gap-3">
                <input type="checkbox" name="telegram_enabled" {{#if notifications.telegram.enabled}}checked{{/if}} class="w-4 h-4 accent-black cursor-pointer">
                <span class="text-sm font-medium">Enable Telegram notifications</span>
            </label>

            <div class="grid gap-2">
                <label for="telegram_hash" class="text-sm font-medium">Telegram connection hash</label>
                <div class="flex items-center gap-2">
                    <input type="text" id="telegram_hash" readonly value="{{notifications.telegram.hash}}" class="flex-1 rounded-lg border px-3 py-2 outline-none bg-neutral-100 text-neutral-600 select-all">
                    <button type="button" class="copy-btn text-sm bg-black text-white px-3 py-2 rounded-lg hover:opacity-90" data-copy-target="#telegram_hash">Copy</button>
                </div>
                <p class="text-xs text-neutral-500">Use this hash in Telegram to connect your account via the botâ€™s <code>/connect</code> command.</p>
            </div>

            <div class="grid gap-2">
                <label for="telegram_frequency" class="text-sm font-medium">Maximum frequency (minutes)</label>
                <input type="number" id="telegram_frequency" name="telegram_frequency" min="1" step="1" value="{{notifications.telegram.frequency}}" placeholder="10" class="w-full rounded-lg border px-3 py-2 outline-none focus:ring-2 focus:ring-black/30">
                <p class="text-xs text-neutral-500">Minimum 1 minute between notifications.</p>
            </div>
        </div>
    </form>

    <div class="mt-6 text-center">
        {{!<input type="submit" form="notificationsForm" class="submit inline-flex items-center rounded-lg bg-black px-5 py-2 text-white hover:opacity-90 cursor-pointer" value="Save settings">}}
        <p>Demo Preview. Feature under internal testing.</p>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    for (const btn of document.querySelectorAll('.copy-btn')) {
        btn.addEventListener('click', () => {
            const input = document.querySelector(btn.dataset.copyTarget);
            navigator.clipboard.writeText(input.value);
            btn.innerText = 'Copied!';
            setTimeout(() => (btn.innerText = 'Copy'), 1500);
        });
    }
});
</script>
</main>

{{> footer_tailwind }}
